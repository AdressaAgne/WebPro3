function getLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition,showError)}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:59.911491,lng:10.757933},zoom:5,styles:styleArray,disableDefaultUI:!0})}function showPosition(o){setMap({lat:o.coords.latitude,lng:o.coords.longitude})}function showError(o){switch(o.code){case o.PERMISSION_DENIED:log("User denied the request for Geolocation.");break;case o.POSITION_UNAVAILABLE:log("Location information is unavailable.");break;case o.TIMEOUT:log("The request to get user location timed out.");break;case o.UNKNOWN_ERROR:log("An unknown error occurred.")}}function log(o){console.info(o)}function setMap(o){var e=10;map=new google.maps.Map(document.getElementById("map"),{center:o,zoom:e,styles:styleArray,disableDefaultUI:!0});var t=[],a=[];$.get({url:"/nearby_api/"+o.lat+"/"+o.lng,success:function(o){for(var e=0;e<o.length;e++){var a=o[e],n={lat:Number(a.lat),lng:Number(a.lng)};image="/assets/img/icons/carrot.png",t[e]=new google.maps.Marker({map:map,position:n,title:a.navn})}},dataType:"json"})}getLocation();var map;