function getLocation(){navigator.geolocation.getCurrentPosition(showPosition,showError)}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:59.911491,lng:10.757933},zoom:6,styles:styleArray,disableDefaultUI:!0,disableDoubleClickZoom:!0})}function showPosition(o){lat=o.coords.latitude,lng=o.coords.longitude,setMap({lat:lat,lng:lng,dist:25})}function showError(o){switch(o.code){case o.PERMISSION_DENIED:log("User denied the request for Geolocation.");break;case o.POSITION_UNAVAILABLE:log("Location information is unavailable.");break;case o.TIMEOUT:log("The request to get user location timed out.");break;case o.UNKNOWN_ERROR:log("An unknown error occurred.")}}function log(o){console.info(o)}function setMap(o){var e=10,t=[],n=[];$.get({url:"/api/nearby/"+o.lat+"/"+o.lng+"/"+o.dist,dataType:"json",success:function(e){console.log(e);for(var n=0;n<e.length;n++){var a=e[n],l={lat:Number(a.lat),lng:Number(a.lng)};image="/assets/img/icons/fish.png",t[n]=new google.maps.Marker({map:map,position:l,title:a.navn})}map.setZoom(9),map.panTo(o)}})}getLocation();var map,lat,lng;$("#map_range").change(function(){setMap({lat:lat,lng:lng,dist:this.value})});