function elm(e){return document.querySelector(e)}function ajax(e,t,n,o){if(void 0===e)return null;var r=new FormData;for(var i in t)t.hasOwnProperty(i)&&r.append(i,t[i]);var a=new XMLHttpRequest;a.open("POST",e,!0),void 0!==n&&"function"==typeof n&&a.addEventListener("load",function(e){n(e.target.response)}),void 0!==o&&"function"==typeof o&&a.upload.addEventListener("progress",function(e){e.lengthComputable&&o(e)}),a.send(void 0===r?null:r)}function isset(e){return"undefined"!=typeof e}function upload(e){ajax("recipie/uploadimage",{file:e[0],_token:elm("[name=_token]").value,_method:"post"},function(e){e=JSON.parse(e),window.console.log(e),isset(e.error)?elm(".error").innerHTML="<h2>"+e.error+"</h2>":(elm("#fileText").value=e.id,elm("#drop-container").style.backgroundImage="url('"+e.path+"')")},function(e){var t=Math.floor(e.loaded/e.total*100);0===info&&(info++,elm(".info-text").textContent="Uploading"),t>=100&&(elm(".info-text").textContent="Processing",document.getElementById("svg").setAttribute("class","pie-chart processing")),elm("[data-percent]").setAttribute("data-percent",t),elm("tspan").textContent=t+"%"})}HTMLElement.prototype.onDrop=function(e){return this.addEventListener("drop",function(t){if(t.stopPropagation(),t.preventDefault(),"function"==typeof e){var n=e.bind(this);n(t.dataTransfer.files)}},!1),this},HTMLElement.prototype.onDragOver=function(e){return this.addEventListener("dragover",function(t){if(t.stopPropagation(),t.preventDefault(),"function"==typeof e){var n=e.bind(this);n(t)}},!1),this},HTMLElement.prototype.onDragLeave=function(e){return this.addEventListener("dragleave",function(t){if(t.stopPropagation(),t.preventDefault(),"function"==typeof e){var n=e.bind(this);n(t)}},!1),this};var info=0;elm("#drop-container").onDrop(function(e){e.length>0&&upload(e)}).onDragOver(function(){this.className="drop active"}).onDragLeave(function(){this.className="drop"}),elm("#file").addEventListener("change",function(){files.length>0&&upload(this.files)});